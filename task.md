# Тестовое задание
Нет задачи получить “правильные” ответы, это не экзамен. Задача — понять как бы именно вы подошли к решению данных “проблем”. 


## Backend, финализация заказа мобильного приложения.

После факта доставки заказа клиенту, водитель отбивает статус на бэк, в этот момент нам надо списать деньги с клиента и напечатать ему чек. Однако, списание средств происходит не сразу и платёжный агент сообщает о успехе через вебхук. Печатать чек мы можем, соответственно, только после подтверждения списания денег. 
Расскажите, как бы вы реализовали решение данной задачи на Laravel8+, допуская, что все интеграции с агентом, кассами, водителями у вас есть. Возможно вы бы использовали сторонние пакеты, либо использовали бы сервисы, очереди, что-то ещё. Достаточно рассказать логику, но если вы покажете кусок кода, как бы это могло выглядеть, это будет плюсом. 


## Frontend, найдите “ошибки” в приведённом коде.

Представленный код выполняет свою задачу, но делает это медленно, старые устройства/браузеры “подвисают” у клиентов, предложите решение:


    const need = 100
    let isFind = false
    for (let i = 0; i < 1000000000; i++) {
      if (i === need) isFind = true 
    }
    if (isFind) {
      ...

При вызове метода `auth` код работает неверно и вызывает метод `navigateToAdmin` в любом случае, вне зависимости от результата запроса, почему? 


    const isAdmin = async () => {
      const response = await fetch('/admin/auth')
      return response.ok
    }
    const auth = async () => {
      if (isAdmin()) {
        return navigateToAdmin()
      }
      navigateToUser()
    }


## SQL.

Расскажите, что это за запрос и что он делает


    select
      *
    from
      `routes`
    where
      `company_id` = 1
      and `routes`.`office_id` = 1
      and exists (
        select
          *
        from
          `drivers`
          inner join `route_users` on `drivers`.`id` = `route_users`.`user_id`
        where
          `routes`.`id` = `route_users`.`route_id`
          and `route_users`.`user_type` = 'App\\Models\\Driver'
          and (
            `name` like '%гвоз%'
            or `surname` like '%гвоз%'
            or `middlename` like '%гвоз%'
          )
      )
    order by
      `id` desc
    limit
      15

